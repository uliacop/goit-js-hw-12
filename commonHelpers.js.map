{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43046447-8272f873c9098dbfa2cb53d4e';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImg(request, page, perPage) {\n  try {\n    const res = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: request,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return res.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import iziToast from 'izitoast';\nimport { refs, lightbox } from '../main';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderImg(arr) {\n  if (arr.length === 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n  } else {\n    const markup = arr\n      .map(\n        photo =>\n          `<li class=\"photos-block\">\n            <a class=\"photos-link\" href=\"${photo.largeImageURL}\">\n            <img class=\"photo\" src=\"${photo.webformatURL}\" alt=\"${photo.tags}\"/>\n            </a>\n            <ul class=\"photo-data\">\n            <li class=\"photo-data-detail\"><p><span class=\"info\">Likes</span></br>${photo.likes}</p></li>\n            <li class=\"photo-data-detail\"><p><span class=\"info\">Views</span></br>${photo.views}</p></li>\n            <li class=\"photo-data-detail\"><p><span class=\"info\">Comments</span></br>${photo.comments}</p></li>\n            <li class=\"photo-data-detail\"><p><span class=\"info\">Downloads</span></br>${photo.downloads}</p></li>\n            </ul>\n            </li>`\n      )\n      .join('');\n    refs.galleryList.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n  }\n}\n","import { fetchImg } from './js/pixabay-api';\nimport { renderImg } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const refs = {\n  searchForm: document.querySelector('.search-form'),\n  inputElement: document.querySelector('.search-input'),\n  loader: document.querySelector('.loader'),\n  load: document.querySelector('.load'),\n  galleryList: document.querySelector('.gallery'),\n};\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet searchTerm;\nlet pageCounter = 1;\nconst perPage = 15;\n\nconst preloader = document.querySelector('.loader');\nconst showLoader = () => {\n  preloader.classList.remove('hidden');\n};\n\nconst hideLoader = () => {\n  preloader.classList.add('hidden');\n};\n\nhideLoader();\n\nrefs.searchForm.addEventListener('submit', submitHandle);\n\nasync function submitHandle(e) {\n  e.preventDefault();\n  searchTerm = refs.inputElement.value.trim();\n  pageCounter = 1;\n  refs.galleryList.innerHTML = '';\n  if (searchTerm === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term.',\n      position: 'topRight',\n    });\n    hideLoadMoreBtn();\n    return;\n  }\n  showLoader();\n  try {\n    const images = await fetchImg(searchTerm, pageCounter, perPage);\n    const totalHits = images.totalHits;\n    if (images.hits.length === 0) {\n      refs.galleryList.innerHTML = '';\n      iziToast.info({\n        title: 'Info',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      hideLoadMoreBtn();\n      return;\n    } else {\n      renderImg(images.hits);\n      refs.inputElement.value = '';\n      showLoader();\n    }\n    if (perPage * pageCounter >= totalHits) {\n      hideLoadMoreBtn();\n      endList();\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nrefs.load.style.display = 'none';\n\nasync function loadMoreImages() {\n  try {\n    pageCounter += 1;\n    showLoader();\n    const images = await fetchImg(searchTerm, pageCounter, perPage);\n    const totalHits = images.totalHits;\n\n    renderImg(images.hits);\n    if (perPage * pageCounter >= totalHits) {\n      endList();\n    }\n    const galleryCardHeight = refs.galleryList.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({ top: galleryCardHeight * 3, behavior: 'smooth' });\n  } catch (error) {\n    console.error('Error fetching more images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: `Error fetching more images: ${error}`,\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nrefs.searchForm.addEventListener('submit', async (e) => {\n  e.preventDefault();\n  searchTerm = refs.inputElement.value.trim();\n  pageCounter = 1;\n  refs.galleryList.innerHTML = '';\n  if (searchTerm === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term.',\n      position: 'topRight',\n    });\n    hideLoadMoreBtn();\n    return;\n  }\n  showLoader();\n  try {\n    const images = await fetchImg(searchTerm, pageCounter, perPage);\n    const totalHits = images.totalHits;\n    if (images.hits.length === 0) {\n      refs.galleryList.innerHTML = '';\n      iziToast.info({\n        title: 'Info',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      hideLoadMoreBtn();\n      return;\n    } else {\n      renderImg(images.hits);\n      refs.inputElement.value = '';\n      showLoader();\n    }\n    if (perPage * pageCounter >= totalHits) {\n      hideLoadMoreBtn();\n      endList();\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nfunction endList() {\n  hideLoadMoreBtn();\n  iziToast.error({\n    title: 'Error',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n  });\n}\n\nfunction showLoadMoreBtn() {\n  refs.load.style.display = 'block';\n}\n\nfunction hideLoadMoreBtn() {\n  refs.load.style.display = 'none';\n}"],"names":["API_KEY","BASE_URL","fetchImg","request","page","perPage","axios","error","renderImg","arr","iziToast","markup","photo","refs","lightbox","SimpleLightbox","searchTerm","pageCounter","preloader","showLoader","hideLoader","submitHandle","e","hideLoadMoreBtn","images","totalHits","endList"],"mappings":"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"}