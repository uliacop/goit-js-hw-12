{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43046447-8272f873c9098dbfa2cb53d4e';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImg(request, page, perPage) {\n  try {\n    const res = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: request,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return res.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import iziToast from 'izitoast';\nimport { refs, lightbox } from '../main';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderImg(arr) {\n  if (arr.length === 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n  } else {\n    const markup = arr\n      .map(\n        photo =>\n          `<li class=\"photos-block\">\n            <a class=\"photos-link\" href=\"${photo.largeImageURL}\">\n            <img class=\"photo\" src=\"${photo.webformatURL}\" alt=\"${photo.tags}\"/>\n            </a>\n            <ul class=\"photo-data\">\n            <li class=\"photo-data-detail\"><p><span class=\"info\">Likes</span></br>${photo.likes}</p></li>\n            <li class=\"photo-data-detail\"><p><span class=\"info\">Views</span></br>${photo.views}</p></li>\n            <li class=\"photo-data-detail\"><p><span class=\"info\">Comments</span></br>${photo.comments}</p></li>\n            <li class=\"photo-data-detail\"><p><span class=\"info\">Downloads</span></br>${photo.downloads}</p></li>\n            </ul>\n            </li>`\n      )\n      .join('');\n    refs.galleryList.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n  }\n}\n\n","import { fetchImg } from './js/pixabay-api';\n import { renderImg} from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const refs = {\n  searchForm: document.querySelector('.search-form'),\n  inputElement: document.querySelector('.search-input'),\n  load: document.querySelector('.load'),\n  galleryList: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n};\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nhideLoader();\nlet searchTerm;\nlet pageCounter = 1;\nconst perPage = 15;\n\nrefs.searchForm.addEventListener('submit', submitHandle);\nasync function submitHandle(e) {\n  e.preventDefault();\n  searchTerm = refs.inputElement.value.trim();\n  pageCounter = 1;\n  refs.galleryList.innerHTML = '';\n  if (searchTerm === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term.',\n      position: 'topRight',\n    });\nhideLoadMoreBtn();\n    return;\n  }\n endList();\n  showLoader();\n  try {\n    const images = await fetchImg(searchTerm, pageCounter, perPage);\n    const totalHits = images.totalHits;\n    if (images.hits.length === 0) {\n      refs.galleryList.innerHTML = '';\n      iziToast.info({\n        title: 'Info',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      hideLoadMoreBtn();\n      return;\n    } else {\n      renderImg(images.hits);\n      refs.inputElement.value = '';\n      showLoadMoreBtn();\n    }\n    if (perPage * pageCounter >= totalHits) {\n      hideLoadMoreBtn();\n      showEndOfCollectionMessage();\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nrefs.load.addEventListener('click', async () => {\n  try {\n    if (refs.load) {\n      pageCounter += 1;\n    }\n    const images = await fetchImg(searchTerm, pageCounter, perPage);\n    const totalHits = images.totalHits;\n    renderImg(images.hits);\nshowLoader();\n    if (perPage * pageCounter >= totalHits) {\n      hideLoadMoreBtn();\n      showEndOfCollectionMessage();\n    }\n    const galleryCardHeight =\n      refs.galleryList.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({ top: galleryCardHeight * 3, behavior: 'smooth' });\n  } catch (error) {\n    console.error('Error fetching more images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: `Error fetching more images: ${error}`,\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nfunction showLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  refs.loader.classList.add('hidden');\n}\n\nfunction showLoadMoreBtn() {\n  refs.load.style.display = 'block';\n}\n\nfunction hideLoadMoreBtn() {\n  refs.load.style.display = 'none';\n}\n\n\nfunction endList() {\n  hideLoadMoreBtn();\n  iziToast.error({\n    title: 'Error',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n  });\n}\n\n"],"names":["API_KEY","BASE_URL","fetchImg","request","page","perPage","axios","error","renderImg","arr","iziToast","markup","photo","refs","lightbox","SimpleLightbox","hideLoader","searchTerm","pageCounter","submitHandle","e","hideLoadMoreBtn","endList","showLoader","images","totalHits","showLoadMoreBtn","galleryCardHeight"],"mappings":"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"}